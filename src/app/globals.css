.post-lightbox-caption {
  color: #fff !important;
  margin-top: 1rem;
  max-width: 850px;
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
  box-sizing: border-box;
}
.post-lightbox-caption * {
  color: #fff !important;
}
body.lightbox-open * {
  cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'><rect x='22' y='6' width='4' height='36' fill='white' transform='rotate(45 24 24)'/><rect x='6' y='22' width='36' height='4' fill='white' transform='rotate(45 24 24)'/></svg>") 24 24, pointer !important;
}
:root {
  --background: #ffffff;
  --foreground: #171717;
  --font-monument: 'Monument Grotesk', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  /* Design system spacing tokens (site-wide) */
  --space-0: 0px;
  --space-xs: 0.75rem; /* was 32px */
  --space-sm: 1.5rem;  /* was 64px */
  --space-md: 128px;
  --space-lg: 192px;
  --space-xl: 256px;
  /* Single gutter variable used by layout elements (nav, content padding) */
  --site-gutter: 2rem;
}

/* Highlight/selection color: black background with white text */
::selection {
  background: #000000;
  color: #ffffff;
}
::-moz-selection {
  background: #000000;
  color: #ffffff;
}

/* Mobile override: smaller gutters on narrow viewports */
@media (max-width: 640px) {
  :root {
    --site-gutter: 1rem;
  }
}

/* Prevent scrolling on home page (3D scene) */
body.no-scroll {
  overflow-y: hidden;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  /* allow footer to stick to bottom when content is short */
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-monument);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ensure headings don't inherit bold weight from the font - keep them normal */
h1, h2, h3, h4, h5, h6, .post-title, .post-author {
  font-weight: 400;
  font-weight: normal;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

a {
  color: inherit;
  text-decoration: none;
}

/* color-scheme forced to default (no dark mode) */

/* Post page styles moved from inline styles */
.post-page {
  position: relative;
  padding: 0;
  min-height: 100vh;
  display: flex;
  align-items: center; /* vertically center the content in the viewport */
  justify-content: center;
  flex-direction: row;
}

@media (max-width: 768px) {
  .post-page {
    padding: 0;
  }
}

.post-transition-img {
  position: fixed;
  top: 50%;
  left: 50%;
  width: auto;
  height: 80vh;
  transform: translate(-50%, -50%) scale(1);
  z-index: 1000;
  display: none;
}

.post-content {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  /* allow the content container to span the full viewport so internal
     sections (like the full-bleed header and the centered post-body) can
     position independently */
  width: 100%;
  max-width: none;
  margin: 18vh 0 1rem 0; /* top:10rem, right:0, bottom:1rem, left:0 */
}

.post-content.is-visible {
  opacity: 1;
}

.post-title {
  font-size: 6vw;
  line-height: .9;
  font-weight: 500;
  text-transform: uppercase;
  max-width: 800px;
}

.post-author {
  font-size: 6vw;
  margin-bottom: 0rem;
  opacity: 0.8;
  line-height: .9;
  color: rgb(0, 0, 0);
  font-weight: 200;
}

.post-image {
  width: 100%;
  height: auto;
  margin-bottom: 2rem;
  border-radius: 0;
}

/* make the header image visually inset by the site gutter while remaining edge-aware
   The image still uses the viewport as the reference (100vw) but is shifted and
   sized so both left and right gutters equal --site-gutter. */
.post-image-header,
.post-main-image,
.post-header-image {
  /* make width equal to viewport minus the left/right gutters */
  width: calc(100vw - (var(--site-gutter) * 2));
  max-width: calc(100vw - (var(--site-gutter) * 2));
  height: auto;
  display: block;
  /* shift the element left by half the viewport then push it in by the gutter so
     the visual edges align with the gutters while the element remains centered */
  margin-left: calc(50% - 50vw + var(--site-gutter));
  margin-right: calc(50% - 50vw + var(--site-gutter));
  margin-bottom: 2rem;
  object-fit: cover;
  object-position: center;
  border-radius: 0;
}

/* header row: metadata and header image side-by-side on wide screens */
.post-header {
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-bottom: 2rem;
}

/* Floating side labels: visible on desktop, centered vertically at the viewport edges */
.floating-side {
  position: fixed;
  top: 50%;
  /* start slightly offset and hidden to avoid an initial flash */
  transform: translateY(-50%) translateX(0.15rem) scale(0.98);
  z-index: 99999;
  pointer-events: none;
  font-family: var(--font-monument);
  font-weight: 400;
  font-size: 1rem;
  /* hidden by default; revealed when `.visible` is applied */
  opacity: 0;
  visibility: hidden;
  /* match NavBar: white text using difference blend mode so it reads over varied backgrounds */
  color: #ffffff;
  mix-blend-mode: difference;
  -webkit-mix-blend-mode: difference;
  white-space: nowrap;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  transition: opacity 0.28s ease, transform 0.36s ease, visibility 0s linear 0.36s;
  will-change: opacity, transform;
}

/* Simple shop styles */
.shop-page {
  /* Use site gutter variable for left/right padding to match layout */
  padding: 48px var(--site-gutter);
}

/* Ensure the shop content sits below fixed nav; add top margin for breathing room */
.shop-page .shop-grid,
.shop-grid {
  margin-top: 60px;
}

.shop-header {
  max-width: 900px;
  margin: 0 auto 24px;
  text-align: center;
}

.shop-controls {
  max-width: 900px;
  margin: 0 auto 24px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.sort-control {
  display: flex;
  align-items: center;
}

.shop-grid {
  display: grid;
  width: calc(100vw - (var(--site-gutter) * 2));
  grid-template-columns: 1fr;
  gap: 20px;
  margin-bottom: 40px;
}

@media (min-width: 640px) {
  .shop-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .shop-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

.shop-card {
  /* remove white bordered card look; keep minimal padding so images align edge-to-edge */
  background: transparent;
  border-radius: 0;
  box-shadow: none;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.shop-card-image {
  width: 100%;
  overflow: hidden;
  /* create a square aspect ratio box */
  position: relative;
  padding-top: 100%; /* 1:1 aspect ratio */
}

/* Underline product name when hovering over image */
.shop-card-image:hover ~ .shop-card-content h3 a,
.shop-card-img-wrap:hover ~ .shop-card-content h3 a {
  text-decoration: underline;
}

.shop-card-img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.shop-card-content {
  padding: 10px 4px 0 4px;
  text-align: left;
}

.shop-card-desc {
  display: none; /* hide long descriptions in grid view */
}


.shop-card h3 {
  margin: 0 0 6px 0;
  font-size: 0.9rem;
  font-family: var(--font-monument);
  font-weight: 700;
}

.shop-card p {
  margin: 0 0 12px 0;
  color: var(--muted, #666);
  font-size: 0.9rem;
}

.shop-embed {
  /* container for Shopify Buy Button embed */
  margin-top: auto;
}

.shop-instructions {
  font-size: 0.9rem;
  color: var(--muted, #666);
  background: rgba(0,0,0,0.02);
  border-radius: 8px;
  padding: 8px 10px;
}

.btn {
  display: inline-block;
  padding: 10px 14px;
  background: var(--accent, #111);
  color: #fff;
  border-radius: 0;
  text-decoration: none;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  width: 300px;
  font-size: 0.9rem;
  font-family: var(--font-monument);
}

.btn:hover { opacity: 0.95; }

.select-wrap {
  position: relative;
  width: 300px; /* match Add to Cart width for aligned controls */
}

.size-select {
  width: 100%;
  height: 35px;
  display: block;
  font-weight: 400;
  padding: 6.66667px 30px;
  padding-left: 6px;
  padding-right: 25px;
  text-overflow: ellipsis;
  text-indent: .01px;
  border: 1px solid #777;
  outline: 0;
  border-radius: 0;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  min-height: 30px;
  font-size: 0.9rem;
  font-family: var(--font-monument);
  background: white;
  box-sizing: border-box;
}

/* Visually indicate disabled options and disabled select state */
.size-select:disabled {
  background: #f6f6f6;
  color: #999;
  border-color: #ddd;
}

/* Styling options is limited across browsers; this will work in many desktop browsers */
select.size-select option:disabled {
  color: #999;
}

/* pointer cursor for interactive select */
.size-select:not(:disabled) {
  cursor: pointer;
}

.size-select:disabled {
  cursor: not-allowed;
}

.select-wrap::after {
  content: '';
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 14px;
  height: 14px;
  background: url('/drop.png') no-repeat center;
  background-size: contain;
  pointer-events: none;
}

/* Scope the Add to Cart button width within product-controls so other buttons are unaffected */
.product-controls .btn {
  width: 200px;
}

/* Fallback: visible <img> positioned over the control for browsers that ignore wrapper pseudo-elements */
/* fallback <img> removed — arrow is provided by .select-wrap::after */

.cart-badge {
  background: #ffffff !important;
  color: #000000 !important;
  mix-blend-mode: normal !important;
  -webkit-mix-blend-mode: normal !important;
  isolation: isolate !important;
}

.floating-title-left {
  left: calc(var(--site-gutter));
  text-align: left;
}
.floating-author-right {
  right: calc(var(--site-gutter));
  text-align: right;
}

@media (max-width: 1024px) {
  .floating-side { display: none; }
}

/* Intro overlay used by the home ThreeScene opening screen. Keeps the overlay
   full-bleed, black, and extends past iOS safe-area insets so there are no
   visible gaps on modern iPhones. This class is intentionally specific so it
   doesn't affect other pages. */
.intro-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  /* push the bottom beyond the viewport to cover home indicator areas */
  bottom: -120px;
  background: #000000;
  z-index: 2147483647; /* ensure this sits on top of canvas and nav */
  /* ensure it paints over the Three.js canvas */
  pointer-events: auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* When the site activates the three-scene, force the document background to black
   to avoid flashes on route transitions on iOS devices. */
body.three-scene-active {
  background: #000 !important;
}

@media (max-width: 900px) {
  .shop-grid {
    /* medium screens: two columns */
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 700px) {
  .shop-grid {
    /* single column on narrow screens */
    grid-template-columns: 1fr;
  }
}

@media (max-width: 420px) {
  .shop-grid {
    grid-template-columns: 1fr;
  }
  .shop-card-content { text-align: center; }
  .shop-card-actions { text-align: center; }
}

/* Product page layout */
.product-page-layout {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 24px;
  width: 100%;
  margin-top: 60px;
  box-sizing: border-box;
}

@media (max-width: 900px) {
  .product-page-layout {
    grid-template-columns: 1fr 1fr;
    grid-template-areas: "image content";
    gap: 20px;
  }
  .product-image {
    grid-area: image;
  }
  .product-controls {
  
    align-items: flex-start !important; /* left-align controls on smaller screens */
  }
  .product-description, .product-controls {
    grid-area: content;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
}

@media (max-width: 700px) {
  .product-page-layout {
    display: flex !important;
    flex-direction: column !important;
    gap: 16px;
    width: 100%;
    box-sizing: border-box;
  }
  .product-image {
    order: 1 !important;
  }
  .product-controls {
    order: 2 !important;
  }
  .product-description {
    order: 3 !important;
  }
}

.product-description {
  grid-column: 1;
  max-width: 350px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
}

.product-image {
  grid-column: 2;
  display: flex;
  justify-content: center;
  align-items: center;
}

.product-image img {
  width: 600px;
  height: auto;
  max-width: 100%;
}

.product-controls {
  grid-column: 3;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
}

/* Reserve a small fixed area at the bottom of product-controls for transient messages
   so showing/hiding messages doesn't push other controls around. */
.product-controls {
  position: relative;
  padding-bottom: 36px; /* reserve space for .product-message */
}

.product-message {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 8px;
  display: flex;
  justify-content: center;
  pointer-events: none; /* message shouldn't block interactions */
}
.product-message-inner {
  pointer-events: auto; /* allow screen readers to focus */
  background: transparent;
  color: #900;
  font-size: 0.9rem;
  font-family: var(--font-monument);
  font-weight: 700;
}

.product-description h1 {
  font-size: 0.9rem;
  font-family: var(--font-monument);
  font-weight: 700;
  margin: 0 0 16px 0;
}

.product-description p {
  font-size: 0.9rem;
  font-family: var(--font-monument);
  font-weight: 400;
  line-height: 1.5;
  margin: 0 0 12px 0;
}

/* Tablet: two columns */
@media (max-width: 768px) {
  .product-page-layout {
    grid-template-columns: 1fr 420px;
    grid-template-areas: "image content";
    gap: 20px;
    width: 100%;
    box-sizing: border-box;
  }

  .product-image {
    grid-area: image;
  }

  .product-description, .product-controls {
    grid-area: content;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
}

/* Mobile: single column with controls under image */
@media (max-width: 480px) {
  .product-page-layout {
    grid-template-columns: 1fr;
    grid-template-areas:
      "image"
      "controls"
      "description";
    gap: 16px;
    width: 100%;
    box-sizing: border-box;
  }

  .product-image {
    grid-area: image;
  }

  .product-controls {
    grid-area: controls;
    align-items: flex-start; /* left-align controls on mobile */
  }

  .product-description {
    grid-area: description;
  }
}

/* Visible/hidden states controlled from JS */
.floating-side.hidden {
  opacity: 0;
  transform: translateY(-50%) translateX(0.15rem) scale(0.98);
  visibility: hidden;
  transition-delay: 0s;
}
.floating-side.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(-50%) translateX(0) scale(1);
  transition-delay: 0s;
}

.post-meta-row {
  display: flex;
  width: 100%;
  /* stack title and author vertically and center them */
  flex-direction: column;
  /* center inside the post column so title/author align with body center */
  align-items: center;
  justify-content: center;
  padding: var(--site-gutter) var(--site-gutter);
  box-sizing: border-box;
  text-align: center;
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
}

/* constrain title/author width and center text when stacked */
.post-meta-row .post-title,
.post-meta-row .post-author {
 
  width: 100%;
  box-sizing: border-box;

  text-align: center;
}

/* Cart slide-over controls */
.cart-qty-btn {
  border: 1px solid #ddd;
  background: transparent;
  padding: 4px 8px;
  cursor: pointer;
}
.cart-remove-btn {
  border: none;
  background: transparent;
  color: #900;
  cursor: pointer;
}

/* when image is part of header-row, occupy half the row and sit on the left */
.post-header-image {
  /* full-bleed across the viewport */
  width: 100vw;
  max-width: 100vw;
  height: auto;
  max-height: 90vh;
  display: block;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  object-fit: cover;
  object-position: center;
  border-radius: 0;
}

@media (max-width: 768px) {
  .post-header {
    margin-left: 0;
  }
  .post-header-image {
    width: 100%;
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
  }
  .post-meta-row {
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
  }
  .post-meta-row .post-title,
  .post-meta-row .post-author {
    max-width: 100%;
    text-align: center;
    font-size: 3rem;
    line-height: .9;
  }
  /* Prevent author names from being hyphenated on small screens; force
     wrapping only at whitespace so a long last name moves to the next line. */
  .post-meta-row .post-author,
  .post-author {
    hyphens: none;
    word-break: normal;
    overflow-wrap: normal;
    max-width: 500px;
    margin-top: -10px;  
  }
}

/* Post body centered single column */
.post-body {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 4rem;
  padding: 0 var(--site-gutter);
  font-size: 1.25rem;
}

@media (max-width: 768px) {
  .post-body {
    max-width: 100%;
    margin-left: var(--site-gutter);
    margin-right: var(--site-gutter);
    padding: 0;
    /* width: 100%; removed as requested */
  }
}

/* Main image figure that follows the same column constraints as .post-body */
.post-main-figure {
  /* full-bleed image area while caption below stays constrained */
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  margin-top: 2rem;
  padding: 0;
  box-sizing: border-box;
}

.post-main-image {
  /* make the header/main image full-bleed */
  width: 100vw;
  max-width: 100vw;
  height: auto;
  display: block;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  object-fit: cover;
  object-position: center;
  max-height: 90vh;
  border-radius: 0;
}

/* blur-up / LQIP support: use background-image for tiny placeholder and fade/scale the real image in */
.post-main-image.not-loaded {
  /* Keep a static LQIP placeholder but do not animate transform or opacity */
  filter: blur(8px) saturate(0.9);
  transform: none;
  transition: none;
}
.post-main-image.is-loaded {
  filter: none;
  transform: none;
  transition: none;
}

/* Lightbox overlay */
.post-lightbox-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.85);
  /* sit above other fixed chrome (NavBar uses a very large z-index) */
  z-index: 2147483650;
  padding: 2rem;
}
.post-lightbox-overlay {
  /* rotated plus cursor (X) - shown when the lightbox overlay is active */
  cursor: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='22' y='6' width='4' height='36' fill='white' transform='rotate(45 24 24)'/%3E%3Crect x='6' y='22' width='36' height='4' fill='white' transform='rotate(45 24 24)'/%3E%3C/svg%3E") 24 24, pointer;
}

/* show a plus cursor on clickable images (indicates image will open a lightbox) */
img[role="button"] {
  cursor: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='22' y='6' width='4' height='36' fill='white'/%3E%3Crect x='6' y='22' width='36' height='4' fill='white'/%3E%3C/svg%3E") 24 24, pointer;
}

/* Carousel side-image custom cursors (use public/cursors/*.svg)
   More specific selector targets interactive images and includes a compact inline
   fallback. The !important is applied to the property so it overrides other rules. */
.post-carousel-slide-3d.is-prev img[role="button"] {
  /* use small 48x48 PNG cursor for reliable browser support; enforce with !important */
  cursor: url('/cursors/left-48.png') 24 24, url('/cursors/left.png') 24 24, url('/cursors/left.svg?v=2') 24 24, w-resize !important;
}
.post-carousel-slide-3d.is-next img[role="button"] {
  /* use small 48x48 PNG cursor for reliable browser support; enforce with !important */
  cursor: url('/cursors/right-48.png') 24 24, url('/cursors/right.png') 24 24, url('/cursors/right.svg?v=2') 24 24, e-resize !important;
}

/* Also apply cursor to the slide container itself so hovering the side area (not only the image) shows the cursor */
.post-carousel-slide-3d.is-prev {
  cursor: url('/cursors/left-48.png') 24 24, url('/cursors/left.png') 24 24, url('/cursors/left.svg?v=2') 24 24, w-resize !important;
}
.post-carousel-slide-3d.is-next {
  cursor: url('/cursors/right-48.png') 24 24, url('/cursors/right.png') 24 24, url('/cursors/right.svg?v=2') 24 24, e-resize !important;
}

/* Center slide should show the plus cursor (indicates open) */
.post-carousel-slide-3d:not(.is-prev):not(.is-next),
.post-carousel-slide-3d:not(.is-prev):not(.is-next) img {
  cursor: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='22' y='6' width='4' height='36' fill='white'/%3E%3Crect x='6' y='22' width='36' height='4' fill='white'/%3E%3C/svg%3E") 24 24, pointer !important;
}

/* Visual plus overlay on image wrappers (figures) that rotates into an X when lightbox is open.
   Pseudo-elements don't work reliably on replaced elements like <img>, so we render
   the plus on the figure wrapper which supports ::after. */

/* Also ensure the overlay cursor is available immediately by matching body cursor when open */
body.lightbox-open {
  /* rotated plus cursor (X) used as the page cursor while lightbox is open */
  cursor: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='22' y='6' width='4' height='36' fill='white' transform='rotate(45 24 24)'/%3E%3Crect x='6' y='22' width='36' height='4' fill='white' transform='rotate(45 24 24)'/%3E%3C/svg%3E") 24 24, pointer;
}

/* keep the inner image area using default cursor so users can interact (e.g. drag/select)
   but the overlay (click-to-close) shows the X cursor */

.post-lightbox-inner {
  max-width: 95vw;
  max-height: 95vh;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.post-lightbox-image {
  max-width: 100%;
  max-height: 80vh;
  object-fit: contain;
  text-align: center;
}
.post-lightbox-close {
  position: fixed;
  right: var(--site-gutter);
  top: 0.5rem;
  padding: 0 var(--site-gutter);
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
}

.post-body :where(p, h2, h3, ul, ol, blockquote) {
  line-height: 1.2;
  margin-bottom: 1rem;
}

@media (max-width: 800px) {
  .post-body {
  margin-left: var(--site-gutter);
  margin-right: var(--site-gutter);
    max-width: 100%;
  }
  .post-main-figure {
    /* keep main figure full-bleed to viewport edges on small screens */
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    max-width: 100%;
    box-sizing: border-box;
  }
    .post-main-caption,
  .post-body-caption {
    margin-left: var(--site-gutter);
    margin-right: var(--site-gutter);
    max-width: calc(100% - 2rem);
    padding: 0;
    text-align: left;
  }
  /* inline figures should not remain centered on mobile; make them consume
     the content width so images and captions align with the post text */
  .post-body-figure {
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
    padding: 0;
    box-sizing: border-box;
  }
  .post-body-figure > img {
    width: 100%;
    margin-left: 0;
    margin-right: 0;
    display: block;
  }
  /* Full-bleed figures: keep images edge-to-edge but remove desktop calc offsets
     so captions can align with the post column on small screens. */
  .post-body-figure.fullwidth,
  .post-body-image.fullwidth,
  .post-main-image {
    /* offset the full-bleed figures so their edges match the viewport */
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    width: 100vw;
    max-width: 100vw;
    box-sizing: border-box;
  }
  /* Constrain captions for fullwidth images to the post gutters on mobile */
  .post-body-figure.fullwidth .post-body-caption,
  .post-main-figure .post-main-caption,
  .post-body-figure.fullwidth .post-body-caption :where(p) {
    margin-left: var(--site-gutter);
    margin-right: var(--site-gutter);
    max-width: calc(100% - 2rem);
    padding: 0;
    box-sizing: border-box;
    text-align: left;
  }
}

/* PortableText images */
.post-body-image {
  width: 100%;
  height: auto;
  display: block;
  /* keep top spacing from preceding content but let captions control the below spacing */
  margin: 1.5rem 0 0;
  border-radius: 0;
}

/* Inline blockContent figure/caption styling */

.post-body-figure {
  /* inline block images constrained to the post column.
     Use full post column width (up to 800px). Do not add extra inner
     horizontal padding here — captions and the post column control gutters. */
  width: 100%;
  max-width: 800px;
  margin: 1.5rem 0;
  padding: 0;
  box-sizing: border-box;
}

/* full-bleed variant for occasional breakout images in PortableText */
.post-body-figure.fullwidth {
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: 0;
}

.post-body-image.fullwidth {
  /* The parent figure (.post-body-figure.fullwidth) is positioned full-bleed
    (100vw and shifted with calc). The image itself should simply fill the
    figure's width so use width:100% and reset margins to avoid double offsets. */
  width: 100%;
  max-width: none;
  margin-left: 0;
  margin-right: 0;
  /* Keep the image's intrinsic aspect ratio and let its natural height
    determine the rendered height. This means exceptionally tall images
    will be tall on the page (not cropped via cover). */
  height: auto;
  max-height: none;
  display: block;
  object-position: center;
  border-radius: 0;
}

/* When editors choose "Full height (no crop)", show the full image instead of
   covering/cropping it. Use contain so the whole image is visible and center it
   within the viewport; constrain height so it doesn't overflow the viewport. */
.post-body-figure.fullwidth.fullheight {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: auto;
  /* Keep the figure full-bleed but provide visual gutters via padding. */
  padding: 0 10rem;
  box-sizing: border-box;
  overflow: visible;
}
.post-body-image.fullwidth.fullheight {
  /* Keep fullwidth+fullheight images full-bleed but respect their intrinsic
    height (width = 100vw; height = auto). This prevents cropping and lets
    very tall images render at their natural height while still touching
    the viewport edges. We keep the padding on the figure and use negative
    margins on the image to visually inset the subject when editors choose
    gutters. */
  width: 100vw;
  max-width: none;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  height: auto;
  max-height: none;
  display: block;
  object-fit: none;
  object-position: center top;
}

/* Ensure images with only `fullheight` (or fullheight + fullwidth) are
   displayed edge-to-edge horizontally. Some editor choices set fullHeight
   without also toggling fullWidth; this rule forces a full-bleed layout so
   the image doesn't remain centered in a narrow column. */
.post-body-figure.fullheight,
.post-body-figure.fullwidth.fullheight {
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  width: 100vw;
  padding-left: 0; /* remove inner gutters so image touches edges */
  padding-right: 0;
  box-sizing: border-box;
}
.post-body-figure.fullheight .post-body-image,
.post-body-image.fullheight {
  width: 100vw;
  max-width: none;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  display: block;
}

/* Wide margins inset: give 10rem gutters on both sides while keeping image centered. */
.post-body-figure.fullwidth.wide-margins {
  /* Keep the figure full-bleed while using the site gutter as the
     inner visual gutter so the image lines up with other content. */
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  /* use the site-wide gutter so the inset matches other page elements */
  padding: 0 var(--site-gutter);
  box-sizing: border-box;
  overflow: visible;
}
/* Ensure the image inside a wide-margins fullwidth figure is inset by the
   figure's padding so the visual side gutters are respected. Use the site
   gutter variable so alignment is consistent across the site. */
.post-body-figure.fullwidth.wide-margins .post-body-image {
  /* Make the image fill the padded content area of the figure so the
    figure's padding (gutters) is the single source of horizontal spacing.
    Remove any explicit margins on the image to avoid doubling the space. */
  width: 100%;
  max-width: none;
  margin: 0;
  display: block;
  box-sizing: border-box;
}
.post-body-image.fullwidth.wide-margins {
  /* Keep wide-margins full-bleed but maintain intrinsic height. We use
    negative margins in the editor layout to create visual gutters while
    ensuring the image still spans the viewport. */
  width: 100vw;
  max-width: none;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  height: auto;
  max-height: none;
  display: block;
  object-position: center;
}

/* When fullheight + wide margins are used together, keep contain behavior
   but still offset the image so the visible edges touch the viewport. */
.post-body-image.fullwidth.wide-margins.fullheight {
  width: 100vw;
  max-width: none;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  height: auto;
  max-height: none;
  object-fit: none;
  object-position: center top;
}

/* Keep captions under fullwidth/fullheight images and constrained to the
   post column width so they don't float beside the image. */
.post-body-figure.fullwidth.fullheight .post-body-caption {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 1rem;
  padding: 0 var(--site-gutter);
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
  text-align: left;
}

/* Ensure captions for fullwidth (non-fullheight) figures also align with
   the centered post column on desktop. Mobile rules (max-width:800px)
   will override these to use 1rem gutters via margins. */
.post-body-figure.fullwidth .post-body-caption,
.post-main-figure .post-main-caption {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 1rem;
  padding: 0 var(--site-gutter);
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
  text-align: left;
  box-sizing: border-box;
}

/* Mobile-first override placed after the desktop rules so it wins the cascade.
   Ensure fullwidth image captions use the post gutters on small screens and
   remove any desktop padding that causes a left indent. */
@media (max-width: 800px) {
  .post-body-figure.fullwidth .post-body-caption,
  .post-body-figure.fullwidth.fullheight .post-body-caption,
  .post-main-figure .post-main-caption {
  margin-left: var(--site-gutter);
  margin-right: var(--site-gutter);
  max-width: calc(100% - (2 * var(--site-gutter)));
  padding: 0; /* remove the desktop `padding` that can persist in the cascade */
    box-sizing: border-box;
    text-align: left;
    color: #6b6b6b;
  }

  /* Ensure paragraphs inside captions don't reintroduce extra horizontal offsets */
  .post-body-figure.fullwidth .post-body-caption :where(p) {
    margin-left: 0;
    margin-right: 0;
  }
}


/* When an image is wrapped in a figure (has a caption), remove its own bottom margin
   so the caption's top margin is the single, predictable gap between image and caption. */
.post-body-figure > img,
.post-main-figure > img {
  /* Images inside figure should fill the figure's content area and have no
     extra margins so they line up with body text. */
  width: 100%;
  height: auto;
  display: block;
  margin: 0;
}

.post-body-caption {
  /* use the same caption styling as the main caption */
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 1rem;
  padding: 0;
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
}

/* Make header/main image caption match inline image captions and align to post column */
.post-main-caption {
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 1rem;
  padding: 0;
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
  text-align: left;
}

/* Remove extra paragraph margins inside PortableText captions */
.post-body-caption :where(p) {
  margin: 0;
  line-height: 1.25;
}

/* Footer styles */
.site-footer {
  width: 100%;
  padding: 0;
  display: block;
  background: var(--background);
  color: var(--foreground);
  /* make all footer text display bold */
  font-weight: 700;
}

/* When footer is visible, make it consume remaining space so it stays at bottom */
.footer-visible .site-footer {
  margin-top: auto;
}

/* The AnimatedLayout mounts the footer inside an .animated-footer-wrapper div.
   Apply margin-top:auto to that wrapper so it behaves as the flex item and
   pushes the footer to the bottom of the viewport when content is short. */
.footer-visible .animated-footer-wrapper {
  margin-top: auto;
  width: 100%;
  display: block;
}

/* Related Content grid - align with post gutters and be responsive */
.related-grid-outer {
  margin-left: auto;
  margin-right: auto;
  padding: 2rem var(--site-gutter);
  margin-top: 5rem;
  margin-bottom: 5rem;
  box-sizing: border-box;
}

.related-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 1rem;
  align-items: start;
}

.related-card {
  display: block;
  color: inherit;
}

.related-thumb-wrap {
  position: relative;
  width: 100%;
  padding-top: 100%; /* square */
  overflow: hidden;
  background: #f7f7f7;
}

.related-thumb {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.related-meta {
  padding: 0.5rem 0 0 0;
}

.related-author {
  color: #6b6b6b;
  font-size: 1.25rem; /* match related title */
  line-height: 1.2;
  font-weight: 500; /* match related title weight */
  margin-top: 0;
}

/* Match related content text/titles to post body typography */
.related-grid-outer h3,
.related-meta,
.related-title {
  font-size: 1.25rem; /* match .post-body */
  line-height: 1.2;
  font-weight: 500; /* medium */
  color: inherit;
}

/* Blinking animation for the Related Content header (user requested) */
@keyframes related-blink {
  0%, 49.999% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

.related-grid-outer h3 {
  animation: related-blink .5s steps(1, end) infinite;
}

@media (prefers-reduced-motion: reduce) {
  .related-grid-outer h3 { animation: none !important; }
}

@media (max-width: 1024px) {
  /* Medium screens: 3 columns so 6 items form 2 rows */
  .related-grid { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 640px) {
  /* Small screens: 2 columns so 6 items form 3 rows */
  .related-grid { grid-template-columns: repeat(2, 1fr); }
  .related-grid-outer { padding-left: var(--site-gutter); padding-right: var(--site-gutter); }
}

/* Hide footer by default to avoid it flashing before client JS decides visibility.
   The layout will add the `footer-visible` class to <body> when the footer
   should be shown. */
.site-footer {
  opacity: 0;
  visibility: hidden;
  transform: translateY(8px);
  transition: opacity 320ms ease, transform 320ms ease, visibility 0s linear 320ms;
}
.footer-visible .site-footer {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  transition-delay: 0s;
}

/* Strong fallback: ensure footer is not visible unless explicitly allowed.
   This uses high specificity and !important to override other rules or inline
   styles that might cause a flash. */
.site-footer.hidden,
body:not(.footer-visible) .site-footer {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}
.site-footer-top {
  display: grid;
  /* two equal columns each taking 50% of the footer width */
  grid-template-columns: 50% 50%;
  /* larger horizontal gutter so there's a clear gap between columns */;
  padding: 1.25rem 2rem;
  border-top: 2px solid rgba(0,0,0,0.08); /* subtle separator */
  align-items: start;
}
.site-footer-top-left {
  display: flex;
  flex-direction: column;
}
.site-footer-top-left .footer-contact,
.site-footer-top-left .footer-instagram {
  color: #ddd;
  text-decoration: none;
}
.site-footer-top-right {
  max-width: 900px;
  color: #bbb;
  font-size: 0.9rem;
  line-height: 1.4;
  text-align: left;
  align-self: start;
}

/* desktop positioning handled by the 50% grid columns above */
.site-footer-logo-wrap {
  width: 100%;
  display: block;
  align-items: center;
  justify-content: center;
  padding: 0;
  background: transparent;
  overflow: hidden;
}
.site-footer-logo {
  /* full-bleed across viewport */
  width: 100vw;
  max-width: none;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  height: auto;
  display: block;
  object-fit: cover;
}

/* Ensure the footer logo displays its native colors (black svg) */
.site-footer-logo {
  filter: none !important;
}

.site-footer-text {
  padding: 1.25rem;
  text-align: left;
}
.site-footer-contact {
  display: flex;
  flex-direction: column; /* make email and instagram stack as two rows */
  /* match the bio's typography so vertical rhythm aligns */
  font-size: 0.9rem;
  line-height: 1.45;
  align-items: flex-start;
  margin-bottom: 0.6rem;
}
.site-footer-contact .footer-contact,
.site-footer-contact .footer-instagram {
  color: #000; /* black text by default */
  text-decoration: none;
  font-weight: 700;
}
.site-footer-desc {
  color: #111;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 0.9rem;
  line-height: 1.45;
  padding: 0 var(--site-gutter);
}

/* Tagline directly under the bio - match the bio's line-height and spacing */
.site-footer-tagline {
  color: inherit;
  max-width: 1100px;
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.45;
  text-align: left;
}

/* Removed color-scheme specific footer rules so footer uses default light styling */

@media (max-width: 760px) {
  .site-footer-top {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 0.75rem;
  }
  /* keep the contact block left-aligned on mobile while the overall block is centered */
  .site-footer-contact {
    align-items: flex-start;
    text-align: left;
  }
  .site-footer-desc {
    margin-top: 0.25rem;
  }
}

/* Hide footer when the Three.js scene is active so it doesn't overlay the canvas */
body.three-scene-active .site-footer {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Ensure black background during Three.js scene */
body.three-scene-active {
  background: black !important;
}

/* Two-image spread: 12-column grid for offsets and spans */
.two-image-spread {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 1.5rem;
  align-items: start;
  margin: 2rem 0;
  box-sizing: border-box;
}

/* Break the spread out of the centered post column on wide screens so the
   grid and offsets align to the viewport instead of the article column. */
@media (min-width: 901px) {
  /* Desktop: half-and-half with offset — images approx 48vw each and nudged
     toward the edges so they meet near the center with a slight overlap. */
  .two-image-spread {
    width: 100vw;
    max-width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
  padding: 0 var(--site-gutter);
    /* keep the 12-column grid so editor offsets still work via inline gridColumn */
    grid-template-columns: repeat(12, 1fr);
    gap: 1.5rem;
  }
  .two-image-spread .two-image-side {
    padding: 0 var(--site-gutter);
  }

  /* left and right images take up ~half the viewport and are nudged outward */
  .two-image-spread .two-image-side.left .two-image {
    width: 48vw;
    max-width: 48vw;
    transform: translateX(-4vw);
    object-fit: cover;
    display: block;
  }
  .two-image-spread .two-image-side.right .two-image {
    width: 48vw;
    max-width: 48vw;
    transform: translateX(4vw);
    object-fit: cover;
    display: block;
    margin-left: auto;
  }
}

/* two-image-spread styles removed (type deprecated) */

/* Multi-image spread vertical stack: each image becomes its own full-bleed row */
.multi-image-spread.vertical-stack {
  --gutter: var(--space-xs);
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: var(--pad-top, 32px) var(--site-gutter) 0; /* bottom padding moved to captions when present */
  box-sizing: border-box;
  display: block;
}
.multi-image-spread.vertical-stack .multi-image-item {
  margin: 0 0 var(--gutter);
}
.multi-image-spread.vertical-stack .multi-image-row {
  width: 100vw;
  max-width: 100vw;
  display: block;
  margin: 0 auto;
  box-sizing: border-box;
}
.multi-image-spread.vertical-stack .multi-image-caption {
  color: #6b6b6b;
  font-size: 0.9rem;
  margin-top: 0.6rem;
  max-width: 900px;
  margin-left: calc(50% - 450px);
  margin-right: calc(50% - 450px);
}

/* Auto-columns: when there are multiple images, make an N column grid (clamped to 4) */
.multi-image-spread.auto-columns {
  display: grid;
  gap: var(--gutter);
  grid-template-columns: var(--auto-grid, repeat(3, 1fr));
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: var(--pad-top, 32px) var(--site-gutter) 0; /* bottom padding moved to captions when present */
  box-sizing: border-box;
}
.multi-image-spread.auto-columns .multi-image-item {
  margin: 0;
}
.multi-image-spread.auto-columns img {
  width: 100%;
  height: auto;
  display: block;
}

/* Spacer placeholder that preserves aspect ratio like an image would */
.multi-image-spread .multi-image-spacer {
  width: 100%;
  display: block;
  background-color: transparent;
  pointer-events: none;
}

/* Stacked captions block under an auto-columns grid */
.multi-image-captions-list {
  /* match the main post column width so captions (and their indices)
     align with other image captions in the article */
  max-width: 800px;
  margin-left: calc(50% - 400px);
  margin-right: calc(50% - 400px);
  padding: 1rem var(--site-gutter) 1rem; /* 1rem gap between images and captions */
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}
.multi-image-captions-item {
  display: flex;
  gap: 0.5rem;
  align-items: flex-start;
  color: #6b6b6b;
  font-size: 0.9rem;
  line-height: 1.25;
}
.multi-image-captions-index {
  /* fixed narrow column with right-aligned numbers so the numeric
     index lines up with the start of the caption text */
  font-weight: 400;
  color: #6b6b6b;
  min-width: 2rem;
  width: 2rem;
  display: inline-flex;
  align-items: center;
  justify-content: start;
  text-align: right;
  height: auto;
  border-radius: 0;
  font-variant-numeric: tabular-nums;
  font-size: 0.9rem;
  padding-right: 0.25rem;
}
.multi-image-captions-text {
  flex: 1 1 auto;
  color: #6b6b6b;
  font-size: 0.9rem;
}

/* Normalize PortableText block spacing inside multi-image captions so
   multiple paragraphs don't show large default margins. We let the
   caption container control vertical rhythm. */
.multi-image-captions-text :where(p, h1, h2, h3, h4, ul, ol, blockquote) {
  margin: 0;
  line-height: 1.25;
}
.multi-image-captions-text :where(p + p, p + ul, p + ol) {
  margin-top: 0.125rem; /* tighter gap between successive blocks */
}

/* Minimal carousel styles used by the new `carousel` block in PortableText */
.post-carousel {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  gap: 1rem;
  padding: 1rem var(--site-gutter);
}
.post-carousel-slide {
  flex: 0 0 86%; /* slightly inset so next slide peeks */
  position: relative;
  width: 100%;
  height: 56vh; /* desktop default */
  align-items: center;

/* Reduce carousel height on smaller viewports so more of the side images are visible */
@media (max-width: 1024px) {
  .post-carousel-3d { height: 44vh; }
}
@media (max-width: 640px) {
  /* smaller mobile height to show more of the left/right slides */
  .post-carousel-3d { height: 18vh; }
}
@media (max-width: 420px) {
  /* very small screens (narrow phones) */
  .post-carousel-3d { height: 16vh; }
}
}
.post-carousel-image {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 0;
}

/* 3D Carousel container and progress UI */
.post-carousel-wrap {
  /* make the carousel full-bleed like other fullwidth figures but keep
     the visible content inset by the site gutter */
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  box-sizing: border-box;
  /* no side padding: carousel should be full-bleed; spacing between slides
    is handled by the track gap calculated in JS */
  padding-left: 0;
  padding-right: 0;
  position: relative;
  overflow: hidden;
}
.post-carousel-progress {
  display: flex;
  gap: 0.5rem;
  padding: 0.5rem var(--site-gutter);
  justify-content: center;
}
.post-carousel-progress-item {
  flex: 1 1 auto;
  height: 4px;
  background: rgba(255,255,255,0.12);
  overflow: hidden;
  border-radius: 2px;
}
.post-carousel-progress-bar {
  display: block;
  height: 100%;
  width: 0%;
  background: #fff;
}

/* CSS 3D carousel visuals */
.post-carousel-3d {
  position: relative;
  width: 100%;
  height: 56vh;
  overflow: hidden;
}

.post-carousel-track {
  display: flex;
  align-items: center;
  height: 100%;
  /* no padding here either; JS controls visual centering and gap */
  padding-left: 0;
  padding-right: 0;
}
.post-carousel-slide-3d {
  /* slide box used by the simple track layout */
  box-sizing: border-box;
}
.post-carousel-track {
  width: 100%;
  height: 100%;
}
.post-carousel-slide-3d {
  /* use site background so letterboxing matches the page */
  background: var(--background);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 0; /* allow flex children to shrink properly */
  overflow: hidden;
  margin: 0;
}
/* Embla variable-width helpers: let slides size to their content, not a fixed percent */
.embla__container {
  display: flex;
  gap: 0; /* gaps handled by slide padding if desired */
  align-items: center;
}
.embla__slide {
  /* important: allow natural image width to determine slide width */
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
}
.embla__slide__img {
  height: 100%;
  width: auto;
  display: block;
}
.post-carousel-slide-3d img,
.post-carousel-image {
  /* size by height and contain so images fill vertical space without cropping */
  height: 100%;
  width: auto;
  object-fit: contain;
  display: block;
}
.post-carousel-controls {
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  justify-content: space-between;
  pointer-events: none;
}
.post-carousel-controls button {
  pointer-events: auto;
  background: rgba(0,0,0,0.5);
  color: #fff;
  border: none;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
}

/* Use same PNG cursor for the control buttons as well */
.post-carousel-prev {
  /* prefer a small 48x48 PNG (more likely to be accepted by browsers); fall back to existing PNG/SVG */
  cursor: url('/cursors/left-48.png') 24 24, url('/cursors/left.png') 24 24, url('/cursors/left.svg?v=2') 24 24, w-resize !important;
}
.post-carousel-next {
  /* prefer a small 48x48 PNG (more likely to be accepted by browsers); fall back to existing PNG/SVG */
  cursor: url('/cursors/right-48.png') 24 24, url('/cursors/right.png') 24 24, url('/cursors/right.svg?v=2') 24 24, e-resize !important;
}
.post-carousel-controls button,
.post-carousel-prev,
.post-carousel-next {
  /* ensure the button text/characters use the red color */
  color: #ff0000 !important;
}

/* Target any inline SVGs inside the prev/next buttons and force red fill/stroke */
.post-carousel-controls button svg,
.post-carousel-prev svg,
.post-carousel-next svg {
  width: 24px;
  height: 24px;
  fill: #ff0000 !important;
  stroke: #ff0000 !important;
  color: #ff0000 !important;
}

/* Also target images inside controls, if SVGs are rendered as <img src="..."> */
.post-carousel-controls button img,
.post-carousel-prev img,
.post-carousel-next img {
  filter: none !important;
  /* as a fallback, tint via CSS if the image is an SVG respecting currentColor */
  color: #ff0000 !important;
}

/* Also apply cursor to the slide container itself so hovering the side area shows the arrows */
.post-carousel-slide-3d.is-prev,
.post-carousel-slide-3d.is-prev img {
  cursor: url('/cursors/left.png') 24 24, url('/cursors/left.svg?v=2') 24 24, w-resize !important;
}
.post-carousel-slide-3d.is-next,
.post-carousel-slide-3d.is-next img {
  cursor: url('/cursors/right.png') 24 24, url('/cursors/right.svg?v=2') 24 24, e-resize !important;
}

/* Ensure carousel center slide shows the plus cursor (like other lightbox images).
   Side slides keep arrow cursors via the specific rules above. */
.post-carousel-slide-3d,
.post-carousel-slide-3d img,
.post-carousel-image {
  cursor: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='22' y='6' width='4' height='36' fill='white'/%3E%3Crect x='6' y='22' width='36' height='4' fill='white'/%3E%3C/svg%3E") 24 24, pointer !important;
}

/* Re-assert side arrows just in case order changes elsewhere */
.post-carousel-slide-3d.is-prev,
.post-carousel-slide-3d.is-prev img {
  cursor: url('/cursors/left.png') 24 24, url('/cursors/left.svg?v=2') 24 24, w-resize !important;
}
.post-carousel-slide-3d.is-next,
.post-carousel-slide-3d.is-next img {
  cursor: url('/cursors/right.png') 24 24, url('/cursors/right.svg?v=2') 24 24, e-resize !important;
}






@media (max-width: 900px) {
  /* On small screens, remove the large pad-top/pad-bottom coming from the
     desktop fallback (var(--pad-top) / var(--pad-bottom)). Keep images
     full-bleed horizontally but use 1.5rem vertical rhythm like inline images. */
  .multi-image-spread.vertical-stack,
  .multi-image-spread.auto-columns,
  .multi-image-spread.stack-on-mobile {
    /* remove the desktop padding values that introduce large gaps */
    padding-top: 0;
    padding-bottom: 0;
    /* preserve full-bleed horizontal offset, but remove inner horizontal padding */
    padding-left: 0;
    padding-right: 0;
    box-sizing: border-box;
    /* use the same vertical rhythm as inline images */
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .multi-image-spread.vertical-stack .multi-image-row {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
  }
  .multi-image-spread.auto-columns {
    grid-template-columns: 1fr !important;
    /* ensure the single-column grid still uses full-bleed offsets defined
       by the base rules (margin-left/right calc preserved) */
  }
  .multi-image-captions-list {
   max-width: 100%;
   margin-left: 0;
   margin-right: 0;
   padding: 0.5rem 0 1rem;
   /* Ensure the index column still aligns visually on mobile by reducing
     the left padding so numbers sit near the caption text */
   padding-left: 0;
  }
}


/* When the spread stacks on mobile make it full-bleed and offset the images
   so they appear staggered (left image shifts left, right image shifts right).
   This mirrors the reference where stacked images touch opposite edges. */
@media (max-width: 900px) {
  /* two-image spread styles removed */
}

/* Safari-specific fixes for image loading glitches */
body.safari-browser img {
  /* Force hardware acceleration off for Safari */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  /* Prevent layout shifts by ensuring images don't change size on load */
  image-rendering: -webkit-optimize-contrast;
  /* Ensure images don't cause reflow */
  will-change: auto;
  /* Safari-specific image loading optimizations */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Safari-specific image stabilization */
body.safari-browser .post-main-image,
body.safari-browser .post-body-image,
body.safari-browser .multi-image-row {
  /* Reserve space explicitly */
  min-width: 100%;
  min-height: 200px;
  /* Prevent Safari from recalculating layout */
  contain: layout style paint;
  /* Force GPU acceleration but prevent glitches */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Less aggressive Safari stabilization for related content thumbnails */
body.safari-browser .related-thumb {
  /* Only apply minimal stabilization to prevent layout shifts */
  contain: layout;
  /* Force GPU acceleration but prevent glitches */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Safari-specific carousel fixes */
body.safari-browser .post-carousel-bleed img {
  /* Prevent layout shifts in carousels */
  contain: layout style;
  will-change: transform;
}

/* Safari-specific lightbox fixes */
body.safari-browser .post-lightbox-image {
  /* Prevent Safari viewport jumps */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  contain: layout style paint;
}

/* Safari-specific mobile optimizations - reduce aggressive containment on smaller screens */
@media (max-width: 768px) {
  body.safari-browser .post-main-image,
  body.safari-browser .post-body-image,
  body.safari-browser .multi-image-row {
    contain: layout style;
  }
  
  body.safari-browser .related-thumb {
    contain: layout;
  }
}

